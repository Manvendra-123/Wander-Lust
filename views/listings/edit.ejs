<% layout("/layouts/boilerplate.ejs") %>

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">

      <div class="card shadow-lg">
        <div class="card-body">
          <h3 class="card-title text-center mb-4">Edit Your Listing</h3>

          <form 
            method="POST" 
            action="/listings/<%= listing._id %>?_method=PUT"
          >

            <div class="mb-3">
              <label class="form-label">Title</label>
              <input 
                name="listing[title]" 
                value="<%= listing.title %>" 
                class="form-control"
                type="text"
                required
              />
            </div>

            <div class="mb-3">
              <label class="form-label">Description</label>
              <textarea 
                name="listing[description]" 
                class="form-control"
                rows="3"
                required
              ><%= listing.description %></textarea>
            </div>

            <div class="mb-3">
              <label class="form-label">Image URL</label>
              <input 
                name="listing[image]" 
                value="<%= listing.image %>" 
                class="form-control"
                type="text"
              />
            </div>

            <!-- Image Preview -->
            <% if (listing.image) { %>
              <div class="mb-3 text-center">
                <img 
                  src="<%= listing.image %>" 
                  alt="Listing Image" 
                  class="img-fluid rounded"
                  style="max-height: 200px;"
                />
              </div>
            <% } %>

            <div class="mb-3">
              <label class="form-label">Price (â‚¹)</label>
              <input 
                name="listing[price]" 
                value="<%= listing.price %>" 
                class="form-control"
                type="number"
                required
              />
            </div>

            <div class="mb-3">
              <label class="form-label">Country</label>
              <input 
                name="listing[country]" 
                value="<%= listing.country %>" 
                class="form-control"
                type="text"
                required
              />
            </div>

            <div class="mb-3">
              <label class="form-label">Location</label>
              <input 
                name="listing[location]" 
                value="<%= listing.location %>" 
                class="form-control"
                type="text"
                required
              />
            </div>

            <div class="d-grid gap-2">
              <button class="btn btn-warning btn-lg">
                Update Listing
              </button>
              <a 
                href="/listings/<%= listing._id %>" 
                class="btn btn-outline-secondary"
              >
                Cancel
              </a>
            </div>

          </form>
        </div>
      </div>

    </div>
  </div>
</div>
